<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Background Remover</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <link rel="shortcut icon" type="image/png" href="/static/favicon.png">
    <link rel="apple-touch-icon" href="/static/favicon.png">
    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Background Remover</h1>
            <p class="subtitle">Remove backgrounds from your images instantly</p>

            <!-- Queue Status Display -->
            <div id="queue-status" class="queue-status" style="display: none;">
                <div class="queue-info">
                    <h4>üîÑ Queue Status</h4>
                    <div class="queue-stats">
                        <div class="stat-item">
                            <span class="stat-label">Queue:</span>
                            <span id="queue-length" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Processing:</span>
                            <span id="active-jobs" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Max Concurrent:</span>
                            <span id="max-concurrent" class="stat-value">3</span>
                        </div>
                    </div>
                    <div id="queue-message" class="queue-message"></div>
                </div>
            </div>
        </header>

        <div class="tabs">
            <button class="tab active" data-tab="preview">Preview</button>
            <button class="tab" data-tab="base64">Base64</button>
        </div>

        <!-- Preview Tab -->
        <div id="preview-tab" class="tab-content active">
            <form id="preview-form" onsubmit="return false;">
                <!-- Upload Area -->
                <div id="preview-upload-container">
                    <div class="upload-area" id="preview-upload-area" onclick="document.getElementById('preview-file').click()">
                        <div class="upload-icon">üì∑</div>
                        <div class="upload-text">Drop your image here or click to browse</div>
                        <div class="upload-hint">PNG, JPG, GIF, BMP, TIFF, WEBP (Max 16MB)</div>
                        <input type="file" id="preview-file" accept="image/*" style="display: none;">
                    </div>

                    <!-- Optimization Options -->
                    <div id="preview-options" class="optimization-options" style="display: none;">
                        <h4>üé® Output Options</h4>
                        <div class="options-grid">
                            <div class="option-group">
                                <label for="preview-format">Format:</label>
                                <select id="preview-format" class="form-select">
                                    <option value="JPEG">JPEG (White Background) - Recommended</option>
                                    <option value="WEBP">WEBP (Modern Format) - Best Compression</option>
                                    <option value="PNG">PNG (Transparent Background)</option>
                                </select>
                            </div>
                            <div class="option-group">
                                <label for="preview-quality">Quality: <span id="preview-quality-value">85</span>%</label>
                                <input type="range" id="preview-quality" min="10" max="100" value="85" class="form-range">
                                <small class="text-muted">Lower quality = smaller file size</small>
                            </div>
                        </div>
                        <div class="options-grid">
                            <div class="option-group">
                                <label for="preview-max-width">Max Width (px):</label>
                                <input type="number" id="preview-max-width" min="100" max="4000" placeholder="Original" class="form-input">
                            </div>
                            <div class="option-group">
                                <label for="preview-max-height">Max Height (px):</label>
                                <input type="number" id="preview-max-height" min="100" max="4000" placeholder="Original" class="form-input">
                            </div>
                        </div>
                        <div class="quick-presets">
                            <strong>Quick Presets:</strong>
                            <button type="button" class="preset-btn" data-preset="web">Web (800x600, JPEG 80%)</button>
                            <button type="button" class="preset-btn" data-preset="social">Social (1080x1080, PNG 90%)</button>
                            <button type="button" class="preset-btn" data-preset="print">Print (300DPI, PNG 95%)</button>
                        </div>
                    </div>

                    <div style="text-align: center;">
                        <button id="preview-btn" type="button" class="btn btn-primary" disabled>
                            Remove Background
                        </button>
                    </div>
                </div>

                <!-- Process Other File Button (Hidden by default) -->
                <div id="preview-new-file-container" style="display: none; text-align: center; margin: 30px 0;">
                    <button id="preview-new-file-btn" type="button" class="btn btn-secondary">
                        üìÅ Process Other File
                    </button>
                </div>

                <div id="preview-loading" class="loading">
                    <div class="spinner"></div>
                    <p>Processing your image...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div id="preview-result" class="result"></div>

            <!-- Queue Processing Status (Hidden by default) -->
            <div id="preview-queue-status" class="queue-processing" style="display: none;">
                <h3>üîÑ Processing Your Image</h3>
                <div class="job-info">
                    <p><strong>Job ID:</strong> <span id="preview-job-id"></span></p>
                    <p><strong>Status:</strong> <span id="preview-job-status">Queued</span></p>
                    <p><strong>Queue Position:</strong> <span id="preview-queue-position">1</span></p>
                    <p><strong>Progress:</strong></p>
                    <div class="progress-bar">
                        <div id="preview-job-progress-bar" class="progress-fill" style="width: 0%"></div>
                    </div>
                    <p id="preview-job-message">Your job has been added to the queue...</p>
                </div>
                <div id="preview-queue-actions" style="text-align: center; margin-top: 20px;">
                    <button id="preview-check-status-btn" class="btn btn-secondary">Check Status</button>
                    <button id="preview-download-result-btn" class="btn btn-primary" style="display: none;">Download Result</button>
                </div>
            </div>
            </form>
        </div>

        <!-- Base64 Tab -->
        <div id="base64-tab" class="tab-content">
            <!-- Base64 Input Area -->
            <div id="base64-input-container">
                <div class="base64-input-container">
                    <label for="base64-input">Paste base64 data or file path:</label>
                    <textarea
                        id="base64-input"
                        rows="8"
                        placeholder="Paste base64 encoded image data here... OR paste file path like: C:\Users\User\Downloads\encoded-20251028041641.txt"
                    ></textarea>
                    <div class="hint">
                        <strong>Formats supported:</strong><br>
                        ‚Ä¢ Base64 image data: data:image/png;base64,xxxxx<br>
                        ‚Ä¢ File path: C:\Users\User\Downloads\encoded-20251028041641.txt (only .txt files)<br>
                        <br>
                        <strong>Image formats:</strong> PNG, JPG, GIF, BMP, TIFF, WEBP
                    </div>
                </div>

                <!-- Base64 Optimization Options -->
                <div id="base64-options" class="optimization-options" style="display: none;">
                    <h4>üé® Output Options</h4>
                    <div class="options-grid">
                        <div class="option-group">
                            <label for="base64-format">Format:</label>
                            <select id="base64-format" class="form-select">
                                <option value="JPEG">JPEG (White Background) - Recommended</option>
                                <option value="WEBP">WEBP (Modern Format) - Best Compression</option>
                                <option value="PNG">PNG (Transparent Background)</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label for="base64-quality">Quality: <span id="base64-quality-value">85</span>%</label>
                            <input type="range" id="base64-quality" min="10" max="100" value="85" class="form-range">
                            <small class="text-muted">Lower quality = smaller file size</small>
                        </div>
                    </div>
                    <div class="options-grid">
                        <div class="option-group">
                            <label for="base64-max-width">Max Width (px):</label>
                            <input type="number" id="base64-max-width" min="100" max="4000" placeholder="Original" class="form-input">
                        </div>
                        <div class="option-group">
                            <label for="base64-max-height">Max Height (px):</label>
                            <input type="number" id="base64-max-height" min="100" max="4000" placeholder="Original" class="form-input">
                        </div>
                    </div>
                    <div class="quick-presets">
                        <strong>Quick Presets:</strong>
                        <button type="button" class="preset-btn" data-preset-base64="web">Web (800x600, JPEG 80%)</button>
                        <button type="button" class="preset-btn" data-preset-base64="social">Social (1080x1080, PNG 90%)</button>
                        <button type="button" class="preset-btn" data-preset-base64="optimized">Optimized (WEBP 70%)</button>
                    </div>
                </div>

                <div style="text-align: center;">
                    <button id="base64-btn" type="button" class="btn btn-success" disabled>
                        Remove Background
                    </button>
                </div>
            </div>

            <!-- Process Other File Button (Hidden by default) -->
            <div id="base64-new-file-container" style="display: none; text-align: center; margin: 30px 0;">
                <button id="base64-new-file-btn" type="button" class="btn btn-secondary">
                    üìÅ Process Other File
                </button>
            </div>

            <div id="base64-loading" class="loading">
                <div class="spinner"></div>
                <p>Processing your base64 image...</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="base64-result" class="result"></div>

            <!-- Queue Processing Status (Hidden by default) -->
            <div id="base64-queue-status" class="queue-processing" style="display: none;">
                <h3>üîÑ Processing Your Image</h3>
                <div class="job-info">
                    <p><strong>Job ID:</strong> <span id="base64-job-id"></span></p>
                    <p><strong>Status:</strong> <span id="base64-job-status">Queued</span></p>
                    <p><strong>Queue Position:</strong> <span id="base64-queue-position">1</span></p>
                    <p><strong>Progress:</strong></p>
                    <div class="progress-bar">
                        <div id="base64-job-progress-bar" class="progress-fill" style="width: 0%"></div>
                    </div>
                    <p id="base64-job-message">Your job has been added to the queue...</p>
                </div>
                <div id="base64-queue-actions" style="text-align: center; margin-top: 20px;">
                    <button id="base64-check-status-btn" class="btn btn-secondary">Check Status</button>
                    <button id="base64-download-result-btn" class="btn btn-primary" style="display: none;">Download Result</button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <div id="app-info">
                <p><span id="app-name">Background Remover API</span> - Version: <span id="app-version">v1.0</span></p>
            </div>
        </footer>
    </div>

    <script src="/static/js/app.js?v=14"></script>
</body>
</html>